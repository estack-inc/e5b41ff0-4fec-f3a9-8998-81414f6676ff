# ハンズオンプロジェクト 2：リアルタイム Markdown エディタ

## 課題概要

Claude Code の高度な機能を活用して、リアルタイムプレビュー機能付きの Markdown エディタを開発します。
この課題では、ファイル操作、リアルタイム処理、外部ライブラリの統合など、実践的な開発スキルを習得できます。

## 学習目標

### 技術スキル
- File API を使用したローカルファイルの読み書き
- リアルタイムイベント処理の実装
- 外部ライブラリ（marked.js、highlight.js）の統合
- レスポンシブな 2 ペインレイアウトの構築

### Claude Code 活用スキル
- 複雑な機能の段階的な実装依頼
- デバッグとトラブルシューティング
- パフォーマンス最適化の相談
- コードレビューと改善提案の活用

## ハンズオンの進め方

### ステップ 1：基本構造の作成（10分）

Claude Code への指示例：
```
Markdown エディタの基本構造を作成してください。
左側にテキストエディタ、右側にプレビューエリアを配置した
2 ペインレイアウトで実装してください。
HTML、CSS、JavaScript を使用してください。
```

期待される成果：
- index.html（基本レイアウト）
- styles.css（スタイリング）
- script.js（基本ロジック）

### ステップ 2：Markdown パース機能の実装（10分）

Claude Code への指示例：
```
marked.js ライブラリを CDN から読み込んで、
左側のエディタに入力された Markdown を
リアルタイムで右側にプレビュー表示してください。
```

実装ポイント：
- marked.js の CDN 読み込み
- input イベントでのリアルタイム変換
- HTML への安全な挿入

### ステップ 3：シンタックスハイライトの追加（5分）

Claude Code への指示例：
```
highlight.js を追加して、コードブロックに
シンタックスハイライトを適用してください。
GitHub 風のテーマを使用してください。
```

### ステップ 4：ファイル操作機能の実装（10分）

Claude Code への指示例：
```
以下のファイル操作機能を追加してください：
1. ローカルファイルを開く機能
2. 編集内容を .md ファイルとして保存する機能
3. HTML としてエクスポートする機能
```

実装する機能：
- ファイル選択ダイアログ
- FileReader API の使用
- Blob と download 属性を使った保存

### ステップ 5：UI/UX の改善（10分）

Claude Code への指示例：
```
以下の UI 改善を実装してください：
1. ツールバーを追加（開く、保存、エクスポートボタン）
2. ダークモードの切り替え機能
3. エディタとプレビューの幅を調整できるスプリッター
```

### ステップ 6：応用機能の追加（15分）

選択して実装する応用機能：

#### A. 自動保存機能
```
LocalStorage を使用して、5秒ごとに自動保存する機能を追加してください。
ページをリロードしても内容が保持されるようにしてください。
```

#### B. Markdown チートシート
```
Markdown 記法のチートシートを表示する
サイドパネルを追加してください。
トグルボタンで表示/非表示を切り替えられるようにしてください。
```

#### C. ショートカットキー
```
以下のキーボードショートカットを実装してください：
- Ctrl+S: 保存
- Ctrl+O: 開く
- Ctrl+E: HTML エクスポート
- Ctrl+D: ダークモード切り替え
```

#### D. プリントプレビュー
```
プレビューを印刷用に最適化して表示する機能を追加してください。
@media print CSS を適用してください。
```

## Claude Code との効果的な対話

### 良い質問例 ✅

```
「marked.js でカスタムレンダラーを使用して、
外部リンクを新しいタブで開くようにしてください」
```

```
「ファイル保存時に、ファイル名が空の場合は
デフォルトで 'untitled.md' を使用するようにしてください」
```

```
「エディタの文字数と単語数をリアルタイムで
表示するステータスバーを追加してください」
```

### 避けるべき質問例 ❌

```
「もっと良くして」
```

```
「エラーが出ています」（エラーメッセージを含めない）
```

```
「全部やって」
```

## トラブルシューティング

### よくある問題と解決策

| 問題 | 原因 | Claude Code への依頼例 |
|------|------|------------------------|
| プレビューが更新されない | イベントリスナーの問題 | 「input イベントが正しく動作していません。デバッグしてください」 |
| ファイルが保存できない | ブラウザのセキュリティ制限 | 「ファイル保存が動作しません。代替方法を実装してください」 |
| レイアウトが崩れる | CSS の競合 | 「レスポンシブレイアウトが崩れています。修正してください」 |
| 日本語が文字化けする | 文字エンコーディング | 「日本語テキストが正しく表示されません。UTF-8 で処理してください」 |

## 完成イメージの機能一覧

### 必須機能（基本要件）
- ✅ Markdown のリアルタイムプレビュー
- ✅ シンタックスハイライト付きコードブロック
- ✅ ファイルの開く/保存機能
- ✅ HTML エクスポート
- ✅ レスポンシブな 2 ペインレイアウト

### 応用機能（選択実装）
- ⭐ ダークモード切り替え
- ⭐ 自動保存（LocalStorage）
- ⭐ Markdown チートシート表示
- ⭐ キーボードショートカット
- ⭐ 文字数/単語数カウント
- ⭐ プリントプレビュー
- ⭐ ペイン幅の調整

## 参考リソース

### 使用するライブラリ
- [marked.js](https://marked.js.org/) - Markdown パーサー
- [highlight.js](https://highlightjs.org/) - シンタックスハイライト
- [DOMPurify](https://github.com/cure53/DOMPurify) - XSS 対策（オプション）

### Markdown 記法
- [CommonMark Spec](https://commonmark.org/)
- [GitHub Flavored Markdown](https://github.github.com/gfm/)
- [Markdown Guide](https://www.markdownguide.org/)

### Web API ドキュメント
- [File API](https://developer.mozilla.org/docs/Web/API/File_API)
- [FileReader](https://developer.mozilla.org/docs/Web/API/FileReader)
- [Blob](https://developer.mozilla.org/docs/Web/API/Blob)
- [LocalStorage](https://developer.mozilla.org/docs/Web/API/Window/localStorage)

## 発展課題（時間があれば）

1. **共同編集機能**：WebSocket を使用したリアルタイム共同編集
2. **プラグインシステム**：カスタム Markdown 拡張の追加
3. **テーマエディタ**：CSS 変数を使用したテーマカスタマイズ
4. **バージョン管理**：編集履歴の保存と復元
5. **クラウド同期**：GitHub Gist との連携

## Claude Code 活用のコツ

### 段階的な開発
1. まず動く最小限の機能を実装
2. 動作確認後に機能を追加
3. エラーが出たら具体的に共有
4. リファクタリングは機能完成後

### 効率的なデバッグ
```
「コンソールに以下のエラーが表示されています：
[エラーメッセージをペースト]
原因を特定して修正してください」
```

### パフォーマンス改善
```
「Markdown の変換処理が重いです。
デバウンス処理を追加して最適化してください」
```

### コードレビュー依頼
```
「現在のコードをレビューして、
改善点があれば修正してください」
```

## 最終チェックリスト

開発完了時に確認する項目：

- [ ] Markdown の基本記法が正しくレンダリングされる
- [ ] コードブロックのハイライトが機能する
- [ ] ファイルの開く/保存が正常に動作する
- [ ] HTML エクスポートが正しく動作する
- [ ] レスポンシブデザインが機能する
- [ ] エラーハンドリングが適切に実装されている
- [ ] 日本語テキストが正しく処理される
- [ ] キーボード操作が快適に行える

頑張って開発してください！ 📝✨